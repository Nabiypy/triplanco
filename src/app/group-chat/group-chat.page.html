 <ion-header>
   <ion-toolbar color="danger">
     <ion-buttons slot="start">
       <ion-button fill="clear">
         <ion-back-button color="light"></ion-back-button>
       </ion-button>
     </ion-buttons>
     <ion-buttons slot="end">
       <ion-button fill="clear">
         <img src="{{groupDetails.Picture}}" (click)="viewImage(groupDetails.Picture, groupDetails.Name, groupDetails.description)">
       </ion-button>
     </ion-buttons>
     <span style="font-size: 12px; font-weight: bold">{{groupDetails.Name}} {{ 'GROUP.group' | translate }}</span><br>
     <ion-buttons slot="end" (click)="showActionSheet()">
       <ion-button fill="clear">
         <ion-icon name="more"></ion-icon>
       </ion-button>
     </ion-buttons>
   </ion-toolbar>
   <ion-item>
     <!-- all group member list in slider -->
     <div class="scrolling-wrapper" text-center>
       <div class="story_scroll" *ngFor="let user of GroupMembers">
         <div>
           <div class="story_img_bg">
             <img no-margin no-padding class="story_img" src="{{user.Photo}}" (click)="viewImage(user.Photo, user.Name, user.about)">
           </div>
           <p no-margin no-padding text-center class="story_text">{{ user.Name }}</p>
         </div>
       </div>
     </div>
   </ion-item>
 </ion-header>
<ion-content [scrollEvents]="true" (ionScrollStart)="logScrollStart()" (ionScroll)="logScrolling()" (ionScrollEnd)="logScrollEnd()">
  <!-- Chat list between friend with Id and currentUser with item.Id != friend.Id -->
  <div *ngFor="let item of allMessages; let i = index">
    <!-- When the message type is text the current user sees this-->
    <div class="received chat-box" *ngIf="item.Id != userId && item.type == 'text'">
      <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: #fff"><b>{{allUsers[i].Name}}</b></p>
      <h6>{{item.message}}</h6>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>
    <!-- When the message type is text friend sees this-->
    <div class="send chat-box" *ngIf="item.Id == userId && item.type == 'text'">
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: red"><b>{{allUsers[i].Name}}</b></p>
      <h6>{{item.message}}</h6>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>
    <!-- When the message type is cameraPhoto the current user sees this-->
   
    <div class="receivedimage chat-box" *ngIf="item.Id != userId && item.type == 'image'">
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: #fff"><b>{{allUsers[i].Name}}</b></p>
        <img src="{{item.message}}" (click)="viewImage(item.message, groupDetails.Name, item.timestamp)"/>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>

    <!-- When the message type is cameraPhoto friend sees this-->
    
    <div class="sendimage chat-box" *ngIf="item.Id == userId && item.type == 'image'">
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: red"><b>{{allUsers[i].Name}}</b></p>
      <img src="{{item.message}}" (click)="viewImage(item.message, groupDetails.Name, item.timestamp)"/>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>
    <!-- When the message type is location the current user sees this-->
    
    <div class="receivedlocation chat-box" *ngIf="item.Id != userId && item.type == 'location'">
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: #fff"><b>{{allUsers[i].Name}}</b></p>
      <agm-map [latitude]="item.message.lat" [longitude]="item.message.long">
        <agm-marker [latitude]="item.message.lat" [longitude]="item.message.long" [label]="'M'"></agm-marker>
      </agm-map>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>
    <!-- When the message type is location friend sees this-->
    
    <div class="sendlocation chat-box" *ngIf="item.Id == userId && item.type == 'location'">
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: red"><b>{{allUsers[i].Name}}</b></p>
      <agm-map [latitude]="item.message.lat" [longitude]="item.message.long">
        <agm-marker [latitude]="item.message.lat" [longitude]="item.message.long" [label]="'M'"></agm-marker>
      </agm-map>
      <p>{{item.timestamp | date:'medium'}}</p>
    </div>
  </div>
 
</ion-content>
<!-- The footer contain the input text message-->
<ion-footer no-border>
    <div class="input-wrap">
      <ion-button fill="clear" slot="start" color="dark">
        <ion-icon src="\assets\icon\smile.svg"></ion-icon>
      </ion-button>
      <ion-button fill="clear" slot="start" (click)="attach()" color="dark">
          <ion-icon src="\assets\icon\attach.svg"></ion-icon>
        </ion-button>
      <ion-textarea 
                placeholder="{{ 'GROUP.typemessage' | translate }}"
                [(ngModel)]="newmessage">
      </ion-textarea>
      <ion-button fill="clear" slot="end" color="dark" (click)="addmessage()" [disabled]="!newmessage">
        <ion-icon src="\assets\icon\send.svg"></ion-icon>
      </ion-button>
    </div>
</ion-footer>



